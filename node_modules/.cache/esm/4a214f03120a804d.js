let axios,parseString,buildIndex,archive,buildEntries;_120‍.w("axios",[["default",["axios"],function(v){axios=v}]]);_120‍.w("xml2js",[["parseString",["parseString"],function(v){parseString=v}]]);_120‍.w("./buildIndex",[["buildIndex",["buildIndex"],function(v){buildIndex=v}]]);_120‍.w("./archive",[["archive",["archive"],function(v){archive=v}]]);_120‍.w("./buildEntries",[["buildEntries",["buildEntries"],function(v){buildEntries=v}]]);var fs = require('fs');







const schwartzOnly = (entry) => {
	return entry.author[0].includes('/u/schwartz ')
}

let indexEntries = [];

async function getData() {
	const f = await axios.get('https://dev.lemmy.ml/feeds/c/schwartzworld.xml?sort=Hot')
	let entries;

	parseString(f.data, (err, res) => {
		entries = res.rss.channel[0].item.filter(schwartzOnly).map(entry => {
			const newEntry = {}
			newEntry.title = entry.title;

			const date = new Date(entry.pubDate[0]);
			newEntry.filename = `/pages/${date.getDate()}-${date.getMonth()}-${date.getFullYear()}-${date.getTime()}.html`;
			newEntry.link = entry.link;
			return newEntry;
		});
	});
	buildEntries(entries)
	buildIndex(entries)
	archive(entries)
}

/*
 {
    title: [ 'Rich Tables in the Terminal' ],
    link: [ 'https://news.ycombinator.com/item?id=23738072' ],
    description: [
      'submitted by <a href="https://dev.lemmy.ml/u/schwartz">schwartz</a> to <a href="https://dev.lemmy.ml/c/schwartzworld">schwartzworld</a><br>2 points | <a href="https://dev.lemmy.ml/post/36950">0 comments</a>'
    ],
    author: [
      '/u/schwartz <a href="https://dev.lemmy.ml/u/schwartz">(link)</a>'
    ],
    category: [ [Object] ],
    comments: [ 'https://dev.lemmy.ml/post/36950' ],
    guid: [ 'https://dev.lemmy.ml/post/36950' ],
    pubDate: [ 'Mon, 06 Jul 2020 00:59:29 +0000' ]
  }
*/

getData()